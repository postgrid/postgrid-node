/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { PostGridCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope, mcpScopes } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$bankAccountsCreate } from "./tools/bankAccountsCreate.js";
import { tool$bankAccountsDelete } from "./tools/bankAccountsDelete.js";
import { tool$bankAccountsGet } from "./tools/bankAccountsGet.js";
import { tool$bankAccountsList } from "./tools/bankAccountsList.js";
import { tool$boxesCreate } from "./tools/boxesCreate.js";
import { tool$boxesDelete } from "./tools/boxesDelete.js";
import { tool$boxesGet } from "./tools/boxesGet.js";
import { tool$boxesList } from "./tools/boxesList.js";
import { tool$chequesCreate } from "./tools/chequesCreate.js";
import { tool$chequesDelete } from "./tools/chequesDelete.js";
import { tool$chequesGet } from "./tools/chequesGet.js";
import { tool$chequesGetDepositReadyPdf } from "./tools/chequesGetDepositReadyPdf.js";
import { tool$chequesGetUrl } from "./tools/chequesGetUrl.js";
import { tool$chequesList } from "./tools/chequesList.js";
import { tool$contactsCreate } from "./tools/contactsCreate.js";
import { tool$contactsDelete } from "./tools/contactsDelete.js";
import { tool$contactsGet } from "./tools/contactsGet.js";
import { tool$contactsList } from "./tools/contactsList.js";
import { tool$lettersCreate } from "./tools/lettersCreate.js";
import { tool$lettersDelete } from "./tools/lettersDelete.js";
import { tool$lettersGet } from "./tools/lettersGet.js";
import { tool$lettersGetUrl } from "./tools/lettersGetUrl.js";
import { tool$lettersList } from "./tools/lettersList.js";
import { tool$postcardsCreate } from "./tools/postcardsCreate.js";
import { tool$postcardsDelete } from "./tools/postcardsDelete.js";
import { tool$postcardsGet } from "./tools/postcardsGet.js";
import { tool$postcardsGetUrl } from "./tools/postcardsGetUrl.js";
import { tool$postcardsList } from "./tools/postcardsList.js";
import { tool$selfMailersCreate } from "./tools/selfMailersCreate.js";
import { tool$selfMailersDelete } from "./tools/selfMailersDelete.js";
import { tool$selfMailersGet } from "./tools/selfMailersGet.js";
import { tool$selfMailersGetUrl } from "./tools/selfMailersGetUrl.js";
import { tool$selfMailersList } from "./tools/selfMailersList.js";
import { tool$templatesCreate } from "./tools/templatesCreate.js";
import { tool$templatesDelete } from "./tools/templatesDelete.js";
import { tool$templatesGet } from "./tools/templatesGet.js";
import { tool$templatesList } from "./tools/templatesList.js";
import { tool$templatesUpdate } from "./tools/templatesUpdate.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  apiKeyAuth?: SDKOptions["apiKeyAuth"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "PostGrid",
    version: "0.1.3",
  });

  const client = new PostGridCore({
    apiKeyAuth: deps.apiKeyAuth,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes ?? mcpScopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$bankAccountsCreate);
  tool(tool$bankAccountsList);
  tool(tool$bankAccountsGet);
  tool(tool$bankAccountsDelete);
  tool(tool$boxesCreate);
  tool(tool$boxesList);
  tool(tool$boxesGet);
  tool(tool$boxesDelete);
  tool(tool$chequesCreate);
  tool(tool$chequesList);
  tool(tool$chequesGet);
  tool(tool$chequesDelete);
  tool(tool$chequesGetUrl);
  tool(tool$chequesGetDepositReadyPdf);
  tool(tool$contactsCreate);
  tool(tool$contactsList);
  tool(tool$contactsGet);
  tool(tool$contactsDelete);
  tool(tool$lettersCreate);
  tool(tool$lettersList);
  tool(tool$lettersGet);
  tool(tool$lettersDelete);
  tool(tool$lettersGetUrl);
  tool(tool$postcardsCreate);
  tool(tool$postcardsList);
  tool(tool$postcardsGet);
  tool(tool$postcardsDelete);
  tool(tool$postcardsGetUrl);
  tool(tool$selfMailersCreate);
  tool(tool$selfMailersList);
  tool(tool$selfMailersGet);
  tool(tool$selfMailersDelete);
  tool(tool$selfMailersGetUrl);
  tool(tool$templatesCreate);
  tool(tool$templatesList);
  tool(tool$templatesGet);
  tool(tool$templatesUpdate);
  tool(tool$templatesDelete);

  return server;
}
